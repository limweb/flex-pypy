<html><head><title>Flash game in RPython</title></head><body style="background: #EEEEEE"><center>
 <object width="468" height="60">
<param name="movie" value="output.swf">
<embed src="output.swf" width="468" height="60">
</embed>
</object>
</center>

<br/>
The banner above was generated by the code below! <br/>
<br/>

This is a proof of concept about how to write a Flash game in Python. Check the <a href="http://code.google.com/p/flex-pypy/">flex-pypy project!</a> <br/>

<br/>
<pre><font face="Lucida,Courier New"><font color="#008000">#/usr/bin/env python
</font><font color="#004080">"""
This simple example has very little to do with the pygame
chimp example, except that it will act the same (more or less)
and it uses the same resources, only they got converted to
mp3s, pngs.
"""</font>


<font color="#008000">#Import Modules
</font><font color="#C00000">from</font> <font color="#000000">pypy</font><font color="#0000C0">.</font><font color="#000000">translator</font><font color="#0000C0">.</font><font color="#000000">flex</font><font color="#0000C0">.</font><font color="#000000">modules</font><font color="#0000C0">.</font><font color="#000000">flex</font> <font color="#C00000">import</font> <font color="#0000C0">*</font>

<font color="#C00000">class</font> <font color="#000000">MyRect</font><font color="#0000C0">:</font>
    <font color="#C00000">def</font> <font color="#000000">__init__</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">,</font><font color="#000000">x</font><font color="#0000C0">,</font><font color="#000000">y</font><font color="#0000C0">,</font><font color="#000000">w</font><font color="#0000C0">,</font><font color="#000000">h</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">x</font><font color="#0000C0">,</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">y</font><font color="#0000C0">,</font><font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">w</font><font color="#0000C0">,</font><font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">h</font> <font color="#0000C0">=</font> <font color="#000000">x</font><font color="#0000C0">,</font><font color="#000000">y</font><font color="#0000C0">,</font><font color="#000000">w</font><font color="#0000C0">,</font><font color="#000000">h</font>

<font color="#000000">SCREEN_W</font> <font color="#0000C0">=</font> <font color="#0080C0">468</font>
<font color="#000000">SCREEN_H</font> <font color="#0000C0">=</font> <font color="#0080C0">60</font>

<font color="#C00000">class</font> <font color="#000000">Game</font><font color="#0000C0">:</font>
    <font color="#C00000">def</font> <font color="#000000">__init__</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">)</font><font color="#0000C0">:</font><font color="#C00000">pass</font>

    <font color="#C00000">def</font> <font color="#000000">init</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">,</font><font color="#000000">screen</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">screen</font> <font color="#0000C0">=</font> <font color="#000000">screen</font>
        <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">layout</font> <font color="#0000C0">=</font> <font color="#004080">'absolute'</font>
        <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">setActualSize</font><font color="#0000C0">(</font><font color="#000000">SCREEN_W</font><font color="#0000C0">,</font> <font color="#000000">SCREEN_H</font><font color="#0000C0">)</font>

        <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">addEventListener</font><font color="#0000C0">(</font><font color="#004080">'mouseMove'</font><font color="#0000C0">,</font><font color="#000000">mousemotion</font><font color="#0000C0">)</font>
        <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">addEventListener</font><font color="#0000C0">(</font><font color="#004080">'enterFrame'</font><font color="#0000C0">,</font><font color="#000000">do_loop</font><font color="#0000C0">)</font>
        <font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">addEventListener</font><font color="#0000C0">(</font><font color="#004080">'click'</font><font color="#0000C0">,</font><font color="#000000">chimp_whip</font><font color="#0000C0">)</font>

        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">bg</font> <font color="#0000C0">=</font> <font color="#000000">load_sprite</font><font color="#0000C0">(</font><font color="#004080">"py_background_png"</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">addChild</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">bg</font><font color="#0000C0">)</font>


        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">chimp</font> <font color="#0000C0">=</font> <font color="#000000">load_sprite</font><font color="#0000C0">(</font><font color="#004080">"py_chimp_png"</font><font color="#0000C0">)</font><font color="#0000C0">;</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">addChild</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">chimp</font><font color="#0000C0">)</font>

        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">orig_y</font> <font color="#0000C0">=</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">chimp</font><font color="#0000C0">.</font><font color="#000000">y</font>

        <font color="#000000">img2</font> <font color="#0000C0">=</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">fist</font> <font color="#0000C0">=</font> <font color="#000000">load_sprite</font><font color="#0000C0">(</font><font color="#004080">"py_fist_png"</font><font color="#0000C0">)</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">screen</font><font color="#0000C0">.</font><font color="#000000">addChild</font><font color="#0000C0">(</font><font color="#000000">img2</font><font color="#0000C0">)</font>
        <font color="#000000">img2</font><font color="#0000C0">.</font><font color="#000000">move</font><font color="#0000C0">(</font><font color="#0080C0">400</font><font color="#0000C0">,</font><font color="#000000">img2</font><font color="#0000C0">.</font><font color="#000000">height</font><font color="#0000C0">/</font><font color="#0080C0">2</font><font color="#0000C0">)</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">move</font> <font color="#0000C0">=</font> <font color="#0080C0">1</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">spin</font> <font color="#0000C0">=</font> <font color="#0080C0">0</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit</font> <font color="#0000C0">=</font> <font color="#0080C0">0</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit_move</font> <font color="#0000C0">=</font> <font color="#0080C0">1</font>

        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">sfx</font> <font color="#0000C0">=</font> <font color="#0000C0">{</font><font color="#0000C0">}</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">sfx</font><font color="#0000C0">[</font><font color="#004080">'whip'</font><font color="#0000C0">]</font> <font color="#0000C0">=</font> <font color="#000000">load_sound_resource</font><font color="#0000C0">(</font><font color="#004080">"py_punch_mp3"</font><font color="#0000C0">)</font>
        <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">sfx</font><font color="#0000C0">[</font><font color="#004080">'nohit'</font><font color="#0000C0">]</font> <font color="#0000C0">=</font> <font color="#000000">load_sound_resource</font><font color="#0000C0">(</font><font color="#004080">"py_whiff_mp3"</font><font color="#0000C0">)</font>

    <font color="#C00000">def</font> <font color="#000000">loop</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
        <font color="#000000">img</font> <font color="#0000C0">=</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">chimp</font>
        <font color="#C00000">if</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">spin</font><font color="#0000C0">:</font>
            <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">spin</font> <font color="#0000C0">-=</font> <font color="#0080C0">1</font>
            <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">rotation</font> <font color="#0000C0">=</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">spin</font><font color="#0000C0">*</font><font color="#0080C0">24</font>
        <font color="#C00000">else</font><font color="#0000C0">:</font>
            <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">x</font> <font color="#0000C0">+=</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">move</font> <font color="#0000C0">*</font> <font color="#0080C0">8</font>
            <font color="#C00000">if</font> <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">x</font> <font color="#0000C0">&gt;</font> <font color="#000000">SCREEN_W</font><font color="#0000C0">-</font><font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">width</font><font color="#0000C0">:</font>
                <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">move</font> <font color="#0000C0">=</font> <font color="#0000C0">-</font><font color="#0080C0">1</font>
            <font color="#C00000">if</font> <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">x</font> <font color="#0000C0">&lt;</font> <font color="#0080C0">0</font><font color="#0000C0">:</font>
                <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">move</font> <font color="#0000C0">=</font> <font color="#0080C0">1</font>

        <font color="#C00000">if</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit</font><font color="#0000C0">:</font>
            <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit</font> <font color="#0000C0">-=</font> <font color="#0080C0">1</font>
            <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">fist</font><font color="#0000C0">.</font><font color="#000000">y</font> <font color="#0000C0">+=</font> <font color="#0080C0">6</font> <font color="#0000C0">*</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit_move</font>

            <font color="#C00000">if</font> <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit</font> <font color="#0000C0">&lt;=</font> <font color="#0080C0">5</font><font color="#0000C0">:</font>
                <font color="#000000">self</font><font color="#0000C0">.</font><font color="#000000">hit_move</font> <font color="#0000C0">=</font> <font color="#0000C0">-</font><font color="#0080C0">1</font>


    <font color="#C00000">def</font> <font color="#000000">paint</font><font color="#0000C0">(</font><font color="#000000">self</font><font color="#0000C0">,</font><font color="#000000">screen</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
        <font color="#C00000">pass</font>
<font color="#000000">game</font> <font color="#0000C0">=</font> <font color="#000000">Game</font><font color="#0000C0">(</font><font color="#0000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">mousemotion</font><font color="#0000C0">(</font><font color="#000000">e</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">img</font> <font color="#0000C0">=</font> <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">fist</font>
    <font color="#000000">img_halfw</font> <font color="#0000C0">=</font> <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">width</font> <font color="#0000C0">/</font> <font color="#0080C0">2</font>
    <font color="#000000">newx</font> <font color="#0000C0">=</font> <font color="#000000">e</font><font color="#0000C0">.</font><font color="#000000">stageX</font> <font color="#0000C0">-</font> <font color="#000000">img_halfw</font>
    <font color="#008000"># don't reach the borders
</font>    <font color="#C00000">if</font> <font color="#000000">e</font><font color="#0000C0">.</font><font color="#000000">stageX</font> <font color="#0000C0">&gt;</font> <font color="#000000">SCREEN_W</font> <font color="#0000C0">-</font> <font color="#000000">img_halfw</font><font color="#0000C0">:</font>
        <font color="#000000">newx</font> <font color="#0000C0">=</font> <font color="#000000">SCREEN_W</font> <font color="#0000C0">-</font> <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">width</font>
    <font color="#C00000">if</font> <font color="#000000">newx</font> <font color="#0000C0">&lt;=</font> <font color="#0080C0">0</font><font color="#0000C0">:</font>
        <font color="#000000">newx</font> <font color="#0000C0">=</font> <font color="#0080C0">0</font>

    <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">x</font> <font color="#0000C0">=</font> <font color="#000000">newx</font>

<font color="#C00000">def</font> <font color="#000000">do_loop</font><font color="#0000C0">(</font><font color="#000000">e</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">loop</font><font color="#0000C0">(</font><font color="#0000C0">)</font>

<font color="#C00000">def</font> <font color="#000000">chimp_whip</font><font color="#0000C0">(</font><font color="#000000">e</font><font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">img</font> <font color="#0000C0">=</font> <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">chimp</font>
    <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">hit</font> <font color="#0000C0">=</font> <font color="#0080C0">10</font>
    <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">hit_move</font> <font color="#0000C0">=</font> <font color="#0080C0">1</font>
    <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">fist</font><font color="#0000C0">.</font><font color="#000000">y</font><font color="#0000C0">=</font><font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">fist</font><font color="#0000C0">.</font><font color="#000000">height</font><font color="#0000C0">/</font><font color="#0080C0">2</font>
    <font color="#C00000">if</font> <font color="#000000">e</font><font color="#0000C0">.</font><font color="#000000">stageX</font> <font color="#0000C0">&gt;</font> <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">x</font> <font color="#C00000">and</font> <font color="#000000">e</font><font color="#0000C0">.</font><font color="#000000">stageX</font> <font color="#0000C0">&lt;</font> <font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">x</font><font color="#0000C0">+</font><font color="#000000">img</font><font color="#0000C0">.</font><font color="#000000">width</font><font color="#0000C0">:</font>
        <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">sfx</font><font color="#0000C0">[</font><font color="#004080">'whip'</font><font color="#0000C0">]</font><font color="#0000C0">.</font><font color="#000000">play</font><font color="#0000C0">(</font><font color="#0000C0">)</font>
        <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">spin</font> <font color="#0000C0">=</font> <font color="#0080C0">20</font>
    <font color="#C00000">else</font><font color="#0000C0">:</font>
        <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">sfx</font><font color="#0000C0">[</font><font color="#004080">'nohit'</font><font color="#0000C0">]</font><font color="#0000C0">.</font><font color="#000000">play</font><font color="#0000C0">(</font><font color="#0000C0">)</font>



<font color="#C00000">def</font> <font color="#000000">flash_main</font><font color="#0000C0">(</font> <font color="#000000">x</font><font color="#0000C0">=</font><font color="#0080C0">1</font> <font color="#0000C0">)</font><font color="#0000C0">:</font>
    <font color="#000000">game</font><font color="#0000C0">.</font><font color="#000000">init</font><font color="#0000C0">(</font><font color="#000000">castToWindow</font><font color="#0000C0">(</font><font color="#000000">x</font><font color="#0000C0">)</font><font color="#0000C0">)</font><font color="#000000"></font></font></pre>
    
    </body></html>
